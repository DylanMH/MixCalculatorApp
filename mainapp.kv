#:kivy 2.1.0
# Filename: mainapp.kv

# // Custom Design Properties for default KivyMD
# Custom input properties for text input
<FloatInput@MDTextField>
    canvas.after:
        Color:
            rgba: root.box_color if not self.focus else (0, 1, 0, 0)
        Line:
            width: dp(1)
            rectangle:(*self.pos, *self.size)
    required: True
    mode: "fill"
    halign: "center"
    write_tab: False
    input_type: 'number'

# Custom Label Properties For The Dimension Labels
<MainLabels@MDLabel>
    font_size: dp(18)
    halign: "center"
    theme_text_color: "Primary"

# Rounded Buttons
<MainButton@MDRoundFlatButton>
    font_size: dp(30)

# end of custom properties //

# Screen Manager
WindowManager:
    MainScreen:
        name: "main"
    MixLayout:
        name: "mix"
    ConLayout:
        name: "concrete"

# Main Screen Layout
<MainScreen>:
    name: "main"
    AnchorLayout:
        anchor_x: 'center'
        MDGridLayout:
            rows: 5
            spacing: 20
            height: self.minimum_height
            pos_hint: {'center_x': .5}
            MDIcon:
                icon: "hard-hat"
                theme_text_color: 'Custom'
                #Teal Color
                text_color: 0/255, 128/255, 128/255, 1
                font_size: 45
            MDLabel:
                text: "Construction Calculator"
                font_size: '25'
            MainButton: # Mix Button
                text: "Calculate Mix"
                size_hint: dp(1), None
                on_press: app.change_screen('mix')
            MainButton: # Concrete Button
                text: "Calculate Concrete"
                size_hint: dp(1), None
                on_press: app.change_screen('concrete')
            MainButton: # Close App Button
                text: "Exit"
                size_hint: dp(1), None
                on_press: app.stop()                 
# Layout of Mix Screen
<MixLayout>:
    name: "mix"
    # Resets users previously inputed values
    on_pre_enter:
        length_input.text = ""
        width_input.text = ""
        depth_input.text = ""
        button_output.text = "Calculate Total"
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        MDTopAppBar:
            title: "Mix Calculations"
            left_action_items: [['arrow-left-bold',lambda x: app.change_screen("main")]]
        MainLabels:
            id: length
            text: "Length in Feet"
        FloatInput:
            id: length_input
        MainLabels:
            id: width
            text: "Width in Feet"
        FloatInput:
            id: width_input
        MainLabels:
            id: depth
            text: "Depth in Inches"
        FloatInput:
            id: depth_input

        MainButton:
            id: button_output
            text: "Calculate Total"
            on_press: root.calculations()
            pos_hint: {'center_x': .5}
# Concrete Page Layout
<ConLayout>:
    name: "concrete"
    on_pre_enter:
        length_input.text = ""
        width_input.text = ""
        thickness_input.text = ""
        button_output.text = "Calculate Total"
    # Resets users previously inputed values
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(20)

        MDTopAppBar:
            title: "Concrete Calculations"
            left_action_items: [['arrow-left-bold',lambda x: app.change_screen("main")]]
        MainLabels:
            id: length
            text: "Length in Feet"
        FloatInput:
            id: length_input
        MainLabels:
            id: width
            text: "Width in Feet"
        FloatInput:
            id: width_input
        MainLabels:
            id: thickness
            text: "Thickness in Inches"
        FloatInput:
            id: thickness_input
        MainButton:
            id: button_output
            text: "Calculate Total"
            on_press: root.calculations()
            pos_hint: {'center_x': .5}
            #pos_hint: {'x': dp(app.window_size[0] / 100) * .04}